<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>CE 307 - Projeto de Extensão - 2&nbsp; Criação de gráficos com o ggplot2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03_exercises.html" rel="next">
<link href="./01_intro-ggplot.html" rel="prev">
<link href="./https://ufpr.br/wp-content/uploads/2015/11/ufpr_25.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00_visualizacao-dados.html">Visualização de Dados</a></li><li class="breadcrumb-item"><a href="./02_graphics.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Criação de gráficos com o <code>ggplot2</code></span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CE 307 - Projeto de Extensão</a> 
        <div class="sidebar-tools-main tools-wide">
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="./CE-307---Projeto-de-Extensão.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./CE-307---Projeto-de-Extensão.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apresentação</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./00_visualizacao-dados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualização de Dados</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_intro-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">O pacote <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_graphics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Criação de gráficos com o <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_exercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exercícios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_quizz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Quizz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_beyond-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exemplos de gráficos no R</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#carregando-o-dataset" id="toc-carregando-o-dataset" class="nav-link active" data-scroll-target="#carregando-o-dataset"><span class="header-section-number">2.1</span> Carregando o Dataset</a></li>
  <li>
<a href="#histogramas" id="toc-histogramas" class="nav-link" data-scroll-target="#histogramas"><span class="header-section-number">2.2</span> Histogramas</a>
  <ul class="collapse">
<li><a href="#utilidade" id="toc-utilidade" class="nav-link" data-scroll-target="#utilidade"><span class="header-section-number">2.2.1</span> Utilidade:</a></li>
  <li><a href="#exemplo-de-aplica%C3%A7%C3%A3o" id="toc-exemplo-de-aplicação" class="nav-link" data-scroll-target="#exemplo-de-aplica%C3%A7%C3%A3o"><span class="header-section-number">2.2.2</span> Exemplo de Aplicação:</a></li>
  </ul>
</li>
  <li>
<a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots"><span class="header-section-number">2.3</span> Boxplots</a>
  <ul class="collapse">
<li><a href="#resumo-de-cinco-n%C3%BAmeros" id="toc-resumo-de-cinco-números" class="nav-link" data-scroll-target="#resumo-de-cinco-n%C3%BAmeros"><span class="header-section-number">2.3.1</span> Resumo de cinco números:</a></li>
  <li><a href="#utilidade-1" id="toc-utilidade-1" class="nav-link" data-scroll-target="#utilidade-1"><span class="header-section-number">2.3.2</span> Utilidade:</a></li>
  <li><a href="#exemplo-de-aplica%C3%A7%C3%A3o-1" id="toc-exemplo-de-aplicação-1" class="nav-link" data-scroll-target="#exemplo-de-aplica%C3%A7%C3%A3o-1"><span class="header-section-number">2.3.3</span> Exemplo de Aplicação:</a></li>
  </ul>
</li>
  <li><a href="#gr%C3%A1fico-scatterplot" id="toc-gráfico-scatterplot" class="nav-link" data-scroll-target="#gr%C3%A1fico-scatterplot"><span class="header-section-number">2.4</span> Gráfico Scatterplot</a></li>
  <li>
<a href="#passo-1-definir-a-pontua%C3%A7%C3%A3o-de-mandantes-e-visitantes" id="toc-passo-1-definir-a-pontuação-de-mandantes-e-visitantes" class="nav-link" data-scroll-target="#passo-1-definir-a-pontua%C3%A7%C3%A3o-de-mandantes-e-visitantes"><span class="header-section-number">2.5</span> Passo 1: Definir a Pontuação de Mandantes e Visitantes</a>
  <ul class="collapse">
<li><a href="#adicionar-pontua%C3%A7%C3%A3o-dos-mandantes-e-visitantes" id="toc-adicionar-pontuação-dos-mandantes-e-visitantes" class="nav-link" data-scroll-target="#adicionar-pontua%C3%A7%C3%A3o-dos-mandantes-e-visitantes"><span class="header-section-number">2.5.1</span> 1.1 Adicionar Pontuação dos Mandantes e Visitantes</a></li>
  </ul>
</li>
  <li>
<a href="#passo-2-criar-a-tabela-de-pontua%C3%A7%C3%A3o-dos-times" id="toc-passo-2-criar-a-tabela-de-pontuação-dos-times" class="nav-link" data-scroll-target="#passo-2-criar-a-tabela-de-pontua%C3%A7%C3%A3o-dos-times"><span class="header-section-number">2.6</span> Passo 2: Criar a Tabela de Pontuação dos Times</a>
  <ul class="collapse">
<li><a href="#unir-as-pontua%C3%A7%C3%B5es-de-mandante-e-visitante" id="toc-unir-as-pontuações-de-mandante-e-visitante" class="nav-link" data-scroll-target="#unir-as-pontua%C3%A7%C3%B5es-de-mandante-e-visitante"><span class="header-section-number">2.6.1</span> 2.1 Unir as Pontuações de Mandante e Visitante</a></li>
  </ul>
</li>
  <li>
<a href="#passo-3-exibir-o-gr%C3%A1fico-de-pontua%C3%A7%C3%A3o-dos-times" id="toc-passo-3-exibir-o-gráfico-de-pontuação-dos-times" class="nav-link" data-scroll-target="#passo-3-exibir-o-gr%C3%A1fico-de-pontua%C3%A7%C3%A3o-dos-times"><span class="header-section-number">2.7</span> Passo 3: Exibir o Gráfico de Pontuação dos Times</a>
  <ul class="collapse">
<li><a href="#agora-podemos-criar-um-gr%C3%A1fico-de-barras-mostrando-a-pontua%C3%A7%C3%A3o-total-de-cada-time." id="toc-agora-podemos-criar-um-gráfico-de-barras-mostrando-a-pontuação-total-de-cada-time." class="nav-link" data-scroll-target="#agora-podemos-criar-um-gr%C3%A1fico-de-barras-mostrando-a-pontua%C3%A7%C3%A3o-total-de-cada-time."><span class="header-section-number">2.7.1</span> Agora podemos criar um gráfico de barras mostrando a pontuação total de cada time.</a></li>
  </ul>
</li>
  <li>
<a href="#gr%C3%A1fico-de-dispers%C3%A3o" id="toc-gráfico-de-dispersão" class="nav-link" data-scroll-target="#gr%C3%A1fico-de-dispers%C3%A3o"><span class="header-section-number">2.8</span> Gráfico de Dispersão</a>
  <ul class="collapse">
<li><a href="#utilidade-2" id="toc-utilidade-2" class="nav-link" data-scroll-target="#utilidade-2"><span class="header-section-number">2.8.1</span> Utilidade</a></li>
  <li><a href="#exemplo-de-aplica%C3%A7%C3%A3o-2" id="toc-exemplo-de-aplicação-2" class="nav-link" data-scroll-target="#exemplo-de-aplica%C3%A7%C3%A3o-2"><span class="header-section-number">2.8.2</span> Exemplo de Aplicação</a></li>
  <li><a href="#criando-o-gr%C3%A1fico" id="toc-criando-o-gráfico" class="nav-link" data-scroll-target="#criando-o-gr%C3%A1fico"><span class="header-section-number">2.8.3</span> Criando o gráfico</a></li>
  <li><a href="#o-que-esse-gr%C3%A1fico-mostra" id="toc-o-que-esse-gráfico-mostra" class="nav-link" data-scroll-target="#o-que-esse-gr%C3%A1fico-mostra"><span class="header-section-number">2.8.4</span> O que esse gráfico mostra:</a></li>
  </ul>
</li>
  <li>
<a href="#gr%C3%A1fico-de-setores-pizza" id="toc-gráfico-de-setores-pizza" class="nav-link" data-scroll-target="#gr%C3%A1fico-de-setores-pizza"><span class="header-section-number">2.9</span> Gráfico de Setores (Pizza)</a>
  <ul class="collapse">
<li><a href="#utilidade-3" id="toc-utilidade-3" class="nav-link" data-scroll-target="#utilidade-3"><span class="header-section-number">2.9.1</span> Utilidade</a></li>
  <li><a href="#exemplo-de-aplica%C3%A7%C3%A3o-3" id="toc-exemplo-de-aplicação-3" class="nav-link" data-scroll-target="#exemplo-de-aplica%C3%A7%C3%A3o-3"><span class="header-section-number">2.9.2</span> Exemplo de Aplicação</a></li>
  <li><a href="#criando-o-gr%C3%A1fico-1" id="toc-criando-o-gráfico-1" class="nav-link" data-scroll-target="#criando-o-gr%C3%A1fico-1"><span class="header-section-number">2.9.3</span> Criando o Gráfico</a></li>
  <li><a href="#redu%C3%A7%C3%A3o-de-dados-para-melhoria-da-visualiza%C3%A7%C3%A3o-1" id="toc-redução-de-dados-para-melhoria-da-visualização-1" class="nav-link" data-scroll-target="#redu%C3%A7%C3%A3o-de-dados-para-melhoria-da-visualiza%C3%A7%C3%A3o-1"><span class="header-section-number">2.9.4</span> Redução de Dados para Melhoria da Visualização</a></li>
  </ul>
</li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00_visualizacao-dados.html">Visualização de Dados</a></li><li class="breadcrumb-item"><a href="./02_graphics.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Criação de gráficos com o <code>ggplot2</code></span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-graphics" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Criação de gráficos com o <code>ggplot2</code></span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="carregando-o-dataset" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="carregando-o-dataset">
<span class="header-section-number">2.1</span> Carregando o Dataset</h2>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/raymz1990/CE307-Projeto-Extensao/refs/heads/main/data/serie_a_2010_2024.csv"</span></span>
<span><span class="va">dados</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">url</span>,</span>
<span>                  header <span class="op">=</span> <span class="cn">TRUE</span>,     </span>
<span>                  sep <span class="op">=</span> <span class="st">","</span>,          </span>
<span>                  <span class="co"># quote = "",      </span></span>
<span>                  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="histogramas" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="histogramas">
<span class="header-section-number">2.2</span> Histogramas</h2>
<p>O <strong>Histograma</strong> exibe a frequência com que diferentes intervalos de valores (conhecidos como “bins”) ocorrem em um conjunto de dados. Cada barra do histograma representa a quantidade de dados que se enquadra em um determinado intervalo, com barras mais altas indicando maior ocorrência de valores naquela faixa.</p>
<section id="utilidade" class="level3" data-number="2.2.1"><h3 data-number="2.2.1" class="anchored" data-anchor-id="utilidade">
<span class="header-section-number">2.2.1</span> Utilidade:</h3>
<ul>
<li>
<strong>Verificação da qualidade dos dados</strong>: Histograma ajuda a identificar se há concentrações inesperadas ou valores atípicos (outliers) em certas faixas de dados.</li>
<li>
<strong>Comparação de distribuições entre grupos</strong>: Comparar como diferentes grupos (por exemplo, times, rodadas) se distribuem em termos de variáveis como gols ou público.</li>
</ul></section><section id="exemplo-de-aplicação" class="level3" data-number="2.2.2"><h3 data-number="2.2.2" class="anchored" data-anchor-id="exemplo-de-aplicação">
<span class="header-section-number">2.2.2</span> Exemplo de Aplicação:</h3>
<p>Ao gerar um histograma para o número de gols marcados por rodada, você pode visualizar quantas vezes um time marcou dentro de um intervalo de valores, como entre 0 e 5 gols, permitindo identificar a frequência dos resultados mais comuns.</p>
<hr>
<p>Agora, vou criar um histograma para ilustrar esse conceito.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carregando biblioteca</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ── Attaching core tidyverse packages ───────────────────── tidyverse <span class="dv">2</span>.<span class="fl">0.0</span> ──</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✔ dplyr     <span class="dv">1</span>.<span class="fl">1.3</span>     ✔ readr     <span class="dv">2</span>.<span class="fl">1.4</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✔ forcats   <span class="dv">1</span>.<span class="fl">0.0</span>     ✔ stringr   <span class="dv">1</span>.<span class="fl">5.1</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✔ lubridate <span class="dv">1</span>.<span class="fl">9.3</span>     ✔ tibble    <span class="dv">3</span>.<span class="fl">2.1</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✔ purrr     <span class="dv">1</span>.<span class="fl">0.2</span>     ✔ tidyr     <span class="dv">1</span>.<span class="fl">3.0</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ── Conflicts ─────────────────────────────────────── <span class="fu">tidyverse_conflicts</span>() ──</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✖ dplyr<span class="sc">::</span><span class="fu">filter</span>() masks stats<span class="sc">::</span><span class="fu">filter</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ✖ dplyr<span class="sc">::</span><span class="fu">lag</span>()    masks stats<span class="sc">::</span><span class="fu">lag</span>()</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> ℹ Use the conflicted <span class="fu">package</span> (<span class="sc">&lt;</span>http<span class="sc">:</span><span class="er">//</span>conflicted.r<span class="sc">-</span>lib.org<span class="sc">/</span><span class="er">&gt;</span>) to force all conflicts to become errors</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># dados do histograma</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>histograma <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano_campeonato <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rodada) <span class="sc">%&gt;%</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">gols_mandante =</span> <span class="fu">sum</span>(gols_mandante, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Gerando o histograma</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(histograma, <span class="fu">aes</span>(<span class="at">x =</span> gols_mandante)) <span class="sc">+</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribuição dos Gols Mandantes no Campeonato de 2023"</span>, </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Gols Mandantes"</span>, </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>) <span class="sc">+</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<hr></section></section><section id="boxplots" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="boxplots">
<span class="header-section-number">2.3</span> Boxplots</h2>
<p>O <strong>Boxplot</strong> exibe a distribuição dos dados com base em um resumo de cinco números. Ele fornece uma visão visual da tendência central dos dados, sua variabilidade e possíveis outliers. Cada boxplot é construído a partir de cinco valores: <strong>mínimo</strong>, <strong>primeiro quartil (Q1)</strong>, <strong>mediana (Q2)</strong>, <strong>terceiro quartil (Q3)</strong>, e <strong>máximo</strong>. As “wiskers” (ou extremidades do gráfico) mostram a extensão da variabilidade dos dados, sem incluir os outliers.</p>
<section id="resumo-de-cinco-números" class="level3" data-number="2.3.1"><h3 data-number="2.3.1" class="anchored" data-anchor-id="resumo-de-cinco-números">
<span class="header-section-number">2.3.1</span> Resumo de cinco números:</h3>
<ul>
<li>
<strong>Mínimo</strong>: O menor valor dos dados (desconsiderando outliers).</li>
<li>
<strong>Primeiro Quartil (Q1)</strong>: O ponto abaixo do qual 25% dos dados estão localizados.</li>
<li>
<strong>Mediana (Q2)</strong>: O valor central dos dados (50% dos dados estão abaixo e 50% acima).</li>
<li>
<strong>Terceiro Quartil (Q3)</strong>: O ponto abaixo do qual 75% dos dados estão localizados.</li>
<li>
<strong>Máximo</strong>: O maior valor dos dados (desconsiderando outliers).</li>
</ul>
<p>As “wiskers” (linhas verticais) mostram o alcance dos dados, enquanto os pontos fora das wiskers são considerados outliers.</p>
</section><section id="utilidade-1" class="level3" data-number="2.3.2"><h3 data-number="2.3.2" class="anchored" data-anchor-id="utilidade-1">
<span class="header-section-number">2.3.2</span> Utilidade:</h3>
<ul>
<li>
<strong>Identificação de outliers</strong>: Boxplots são ótimos para identificar valores que estão muito distantes da maioria dos dados.</li>
<li>
<strong>Distribuição de dados</strong>: É possível ver a dispersão dos dados e a presença de qualquer assimetria (skewness) no conjunto de dados.</li>
</ul></section><section id="exemplo-de-aplicação-1" class="level3" data-number="2.3.3"><h3 data-number="2.3.3" class="anchored" data-anchor-id="exemplo-de-aplicação-1">
<span class="header-section-number">2.3.3</span> Exemplo de Aplicação:</h3>
<p>Ao gerar um boxplot para o número de gols marcados pelos times, você pode identificar times que têm uma variação de desempenho alta ou jogos com números de gols fora do padrão.</p>
<hr>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Carregando biblioteca</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Criando o dataframe</span></span>
<span><span class="va">boxplot</span> <span class="op">&lt;-</span> <span class="va">dados</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">time_mandante</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Coritiba FC"</span>, <span class="st">"Athletico-PR"</span>, <span class="st">"Paraná"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Gerar o boxplot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">boxplot</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time_mandante</span>, y <span class="op">=</span> <span class="va">publico</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># geom_boxplot(fill = "lightblue", color = "black") +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Boxplot do Público por Time"</span>, x <span class="op">=</span> <span class="st">"Time Mandante"</span>, y <span class="op">=</span> <span class="st">"Público"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="gráfico-scatterplot" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="gráfico-scatterplot">
<span class="header-section-number">2.4</span> Gráfico Scatterplot</h2>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>dados_rodada <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rodada) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media=</span><span class="fu">mean</span>(gols_mandante, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>dados_time <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rodada, time_mandante) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media=</span><span class="fu">mean</span>(gols_mandante, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> has grouped output by <span class="st">'rodada'</span>. You can override using the</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="st">`</span><span class="at">.groups</span><span class="st">`</span> argument.</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>dados_rodada <span class="sc">%&gt;%</span> </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>rodada,<span class="at">y=</span>media))<span class="sc">+</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>dados_time <span class="sc">%&gt;%</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>rodada,<span class="at">y=</span>media))<span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dados_rodada</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">rodada</span>,y<span class="op">=</span><span class="va">media</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dados_time</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">rodada</span>,y<span class="op">=</span><span class="va">media</span>,col<span class="op">=</span><span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section><section id="passo-1-definir-a-pontuação-de-mandantes-e-visitantes" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="passo-1-definir-a-pontuação-de-mandantes-e-visitantes">
<span class="header-section-number">2.5</span> Passo 1: Definir a Pontuação de Mandantes e Visitantes</h2>
<p>Primeiro, calcularemos a pontuação para o time mandante e o time visitante de acordo com o resultado da partida.</p>
<section id="adicionar-pontuação-dos-mandantes-e-visitantes" class="level3" data-number="2.5.1"><h3 data-number="2.5.1" class="anchored" data-anchor-id="adicionar-pontuação-dos-mandantes-e-visitantes">
<span class="header-section-number">2.5.1</span> 1.1 Adicionar Pontuação dos Mandantes e Visitantes</h3>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Adicionar a pontuação para o time mandante e visitante</span></span>
<span><span class="va">dados_pontos</span> <span class="op">&lt;-</span> <span class="va">dados</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    pontos_mandante <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">gols_mandante</span> <span class="op">&gt;</span> <span class="va">gols_visitante</span> <span class="op">~</span> <span class="fl">3</span>,  <span class="co"># Vitória do mandante</span></span>
<span>      <span class="va">gols_mandante</span> <span class="op">==</span> <span class="va">gols_visitante</span> <span class="op">~</span> <span class="fl">1</span>, <span class="co"># Empate</span></span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span>                             <span class="co"># Derrota do mandante</span></span>
<span>    <span class="op">)</span>,</span>
<span>    pontos_visitante <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">gols_visitante</span> <span class="op">&gt;</span> <span class="va">gols_mandante</span> <span class="op">~</span> <span class="fl">3</span>,  <span class="co"># Vitória do visitante</span></span>
<span>      <span class="va">gols_visitante</span> <span class="op">==</span> <span class="va">gols_mandante</span> <span class="op">~</span> <span class="fl">1</span>, <span class="co"># Empate</span></span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span>                             <span class="co"># Derrota do visitante</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="passo-2-criar-a-tabela-de-pontuação-dos-times" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="passo-2-criar-a-tabela-de-pontuação-dos-times">
<span class="header-section-number">2.6</span> Passo 2: Criar a Tabela de Pontuação dos Times</h2>
<p>Agora que temos a pontuação de cada partida, podemos calcular a pontuação total para cada time, considerando tanto as partidas como mandante quanto como visitante.</p>
<section id="unir-as-pontuações-de-mandante-e-visitante" class="level3" data-number="2.6.1"><h3 data-number="2.6.1" class="anchored" data-anchor-id="unir-as-pontuações-de-mandante-e-visitante">
<span class="header-section-number">2.6.1</span> 2.1 Unir as Pontuações de Mandante e Visitante</h3>
<p>Vamos criar uma tabela única que combine as pontuações de times mandantes e visitantes.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar uma tabela com a pontuação dos times como mandante</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pontos_mandante <span class="ot">&lt;-</span> dados_pontos <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(time_mandante) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pontos_mandante =</span> <span class="fu">sum</span>(pontos_mandante),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">jogos_mandante =</span> <span class="fu">n</span>()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">time =</span> time_mandante)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar uma tabela com a pontuação dos times como visitante</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>pontos_visitante <span class="ot">&lt;-</span> dados_pontos <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(time_visitante) <span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">pontos_visitante =</span> <span class="fu">sum</span>(pontos_visitante),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">jogos_visitante =</span> <span class="fu">n</span>()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">time =</span> time_visitante)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Unir as tabelas de pontuação de mandante e visitante</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>pontuacao_total <span class="ot">&lt;-</span> pontos_mandante <span class="sc">%&gt;%</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(pontos_visitante, <span class="at">by =</span> <span class="st">"time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">pontos_totais =</span> pontos_mandante <span class="sc">+</span> pontos_visitante,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">jogos_totais =</span> jogos_mandante <span class="sc">+</span> jogos_visitante</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pontos_totais)</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar a tabela de pontuação total</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pontuacao_total)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="co"># A tibble: 41 × 7</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>   time         pontos_mandante jogos_mandante pontos_visitante</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>          <span class="er">&lt;</span>int<span class="sc">&gt;</span>            <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">1</span> Paraná                    <span class="dv">19</span>             <span class="dv">19</span>                <span class="dv">4</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">2</span> Barueri                   <span class="dv">20</span>             <span class="dv">19</span>               <span class="dv">11</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">3</span> Joinville<span class="sc">-</span>SC              <span class="dv">25</span>             <span class="dv">19</span>                <span class="dv">6</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">4</span> Santa Cruz                <span class="dv">23</span>             <span class="dv">19</span>                <span class="dv">8</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">5</span> CSA                       <span class="dv">23</span>             <span class="dv">19</span>                <span class="dv">9</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="dv">6</span> Guarani                   <span class="dv">30</span>             <span class="dv">19</span>                <span class="dv">7</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="co"># ℹ 35 more rows</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="co"># ℹ 3 more variables: jogos_visitante &lt;int&gt;, pontos_totais &lt;dbl&gt;, …</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="passo-3-exibir-o-gráfico-de-pontuação-dos-times" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="passo-3-exibir-o-gráfico-de-pontuação-dos-times">
<span class="header-section-number">2.7</span> Passo 3: Exibir o Gráfico de Pontuação dos Times</h2>
<section id="agora-podemos-criar-um-gráfico-de-barras-mostrando-a-pontuação-total-de-cada-time." class="level3" data-number="2.7.1"><h3 data-number="2.7.1" class="anchored" data-anchor-id="agora-podemos-criar-um-gráfico-de-barras-mostrando-a-pontuação-total-de-cada-time.">
<span class="header-section-number">2.7.1</span> Agora podemos criar um gráfico de barras mostrando a pontuação total de cada time.</h3>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Criar gráfico de barras da pontuação total dos times</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">pontuacao_total</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">pontos_totais</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pontos_totais</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, fill <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Pontuação Total dos Times"</span>, x <span class="op">=</span> <span class="st">"Time"</span>, y <span class="op">=</span> <span class="st">"Pontuação Total"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Definir as cores para os times específicos</span></span>
<span><span class="va">cores_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Paraná"</span> <span class="op">=</span> <span class="st">"#0033A0"</span>,   </span>
<span>                 <span class="st">"Coritiba FC"</span> <span class="op">=</span> <span class="st">"#008000"</span>,  </span>
<span>                 <span class="st">"Athletico-PR"</span> <span class="op">=</span> <span class="st">"#FF0000"</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Criar gráfico de barras com cores personalizadas para Paraná, Coritiba e Athletico-PR</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">pontuacao_total</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">pontos_totais</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">pontos_totais</span>, fill <span class="op">=</span> <span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">cores_times</span>, na.value <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># Coloca cinza para times não especificados</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Pontuação Total dos Times"</span>, x <span class="op">=</span> <span class="st">"Time"</span>, y <span class="op">=</span> <span class="st">"Pontuação Total"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="gráfico-de-dispersão" class="level2" data-number="2.8"><h2 data-number="2.8" class="anchored" data-anchor-id="gráfico-de-dispersão">
<span class="header-section-number">2.8</span> Gráfico de Dispersão</h2>
<p>O <strong>Gráfico de Dispersão</strong> exibe a relação entre duas variáveis numéricas em um conjunto de dados. Cada ponto no gráfico representa uma observação, onde a posição no eixo X indica o valor de uma variável, e a posição no eixo Y indica o valor da outra variável. A disposição dos pontos pode revelar padrões, correlações ou até a ausência de uma relação clara entre as variáveis.</p>
<section id="utilidade-2" class="level3" data-number="2.8.1"><h3 data-number="2.8.1" class="anchored" data-anchor-id="utilidade-2">
<span class="header-section-number">2.8.1</span> Utilidade</h3>
<ul>
<li>
<strong>Identificação de relações entre variáveis</strong>: O gráfico de dispersão é útil para observar se duas variáveis estão correlacionadas (positivamente ou negativamente) ou se não há relação aparente entre elas.</li>
<li>
<strong>Detecção de padrões e outliers</strong>: Ele também permite identificar padrões em conjuntos de dados, como tendências de aumento ou diminuição, além de destacar valores atípicos (outliers).</li>
</ul></section><section id="exemplo-de-aplicação-2" class="level3" data-number="2.8.2"><h3 data-number="2.8.2" class="anchored" data-anchor-id="exemplo-de-aplicação-2">
<span class="header-section-number">2.8.2</span> Exemplo de Aplicação</h3>
<p>Ao gerar um gráfico de dispersão para comparar o valor do time mandante de um jogo com a idade média time mandante, você pode verificar se há uma tendência de que jogos com maior valor do time mandante são afetados pela idade média do time, ou se essa relação é inexistente. Além disso, valores muito distantes dos outros pontos podem ser identificados como possíveis outliers, como jogos com valor do time mandante excepcionalmente alto ou baixo.</p>
</section><section id="criando-o-gráfico" class="level3" data-number="2.8.3"><h3 data-number="2.8.3" class="anchored" data-anchor-id="criando-o-gráfico">
<span class="header-section-number">2.8.3</span> Criando o gráfico</h3>
<p>O primeiro passo é carregar o conjunto de dados que vai ser usado no gráfico, seguido da informação ao <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> dos dados devem ser visualmente representadas. O argumento <code>mapping</code> da função <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> define como as variáveis do seu conjunto de dados são mapeadas para as propriedades visuais (estéticas) do gráfico. O mapeamento é sempre definido dentro da função <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>, e os argumentos <code>x</code> e <code>y</code> de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> especificam quais variáveis serão mapeadas para os eixos X e Y. No seu caso, vamos mapear <strong>valor do time mandante</strong> para o eixo X e <strong>idade média time mandante</strong> para o eixo Y.</p>
<p>Aqui está o resultado de adicionar esses mapeamentos:</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">publico</span>, y <span class="op">=</span> <span class="va">colocacao_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>O gráfico, embora vazio, apresenta uma estrutura — fica claro onde o <strong>valor do time mandante</strong> será exibido (no eixo X) e onde a <strong>idade média time mandante</strong> será exibida (no eixo Y). No entanto, os dados ainda não aparecem no gráfico, pois ainda não definimos como as observações serão representadas visualmente.</p>
<p>Para isso, precisamos definir um <strong>geom</strong>: o objeto geométrico que um gráfico usa para representar os dados. Esses objetos geométricos são disponibilizados no <strong>ggplot2</strong> por meio de funções que começam com <code>geom_</code>. Por exemplo, gráficos de barras usam barras geométricas (<code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>), gráficos de linhas usam linhas geométricas (<code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>), boxplots usam geoms de boxplot (<code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>), e gráficos de dispersão usam pontos geométricos (<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>).</p>
<p>A função <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> adiciona uma camada de pontos ao gráfico, criando um gráfico de dispersão. O <strong>ggplot2</strong> possui várias funções <code>geom_</code>, cada uma adicionando um tipo diferente de camada ao gráfico.</p>
<p>Aqui está o código completo para criar o gráfico de dispersão de <strong>valor do time mandante</strong> versus <strong>idade média do mandante</strong>:</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 254 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<section id="adicionando-mais-camadas-e-estética" class="level4" data-number="2.8.3.1"><h4 data-number="2.8.3.1" class="anchored" data-anchor-id="adicionando-mais-camadas-e-estética">
<span class="header-section-number">2.8.3.1</span> Adicionando mais camadas e estética</h4>
<p>Gráficos de dispersão são úteis para mostrar a relação entre duas variáveis numéricas, mas também é interessante adicionar mais informações visuais para enriquecer o gráfico. Por exemplo, podemos incluir a cor dos pontos para indicar qual time mandante jogou. Podemos fazer isso modificando o mapeamento estético dentro da função <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span>, color <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 254 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Agora, cada ponto está colorido de acordo com o time mandante. Isso nos ajuda a visualizar se diferentes times apresentam diferentes padrões na relação entre o valor do time mandante e sua idade média.</p>
</section><section id="adicionando-uma-linha-de-tendência" class="level4" data-number="2.8.3.2"><h4 data-number="2.8.3.2" class="anchored" data-anchor-id="adicionando-uma-linha-de-tendência">
<span class="header-section-number">2.8.3.2</span> Adicionando uma linha de tendência</h4>
<p>Podemos adicionar uma linha de tendência para observar a relação entre o <strong>valor do time mandante</strong> e a <strong>idade média</strong> ao longo dos jogos. Para isso, usamos a função <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>, que adiciona uma curva de ajuste aos dados. Especificando <code>method = "lm"</code>, pedimos uma linha de regressão linear.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span>, color <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; Warning: Removed 254 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_smooth()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 254 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Uma linha de tendência linear indica uma possível relação direta entre o valor da equipe e a idade média. Ou seja, pode-se interpretar se equipes mais caras tendem a ter jogadores mais experientes ou não.</p>
</section><section id="redução-de-dados-para-melhoria-da-visualização" class="level4" data-number="2.8.3.3"><h4 data-number="2.8.3.3" class="anchored" data-anchor-id="redução-de-dados-para-melhoria-da-visualização">
<span class="header-section-number">2.8.3.3</span> Redução de Dados para Melhoria da Visualização</h4>
<p>Quando trabalhamos com grandes conjuntos de dados, como informações detalhadas de várias equipes de futebol, pode ser difícil interpretar as relações entre variáveis devido à quantidade de informação. Para facilitar a análise e melhorar a visualização, é comum filtrar e reduzir os dados, focando em subsetores ou grupos de interesse.</p>
<p>Essa redução de dados ajuda a destacar padrões específicos e a melhorar a interpretação das informações visuais, tornando mais fácil identificar tendências e correlações significativas entre as variáveis escolhidas.</p>
<p>Desta forma, os dados serão reduzidos para uma amostra menor, <code>filtrando</code> 3 times específicos e removendo os valores <code>NA</code>, para que este valores não afetem na análise.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dados_dispersao</span> <span class="op">&lt;-</span> <span class="va">dados</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">time_mandante</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Coritiba FC"</span>, <span class="st">"Athletico-PR"</span>, <span class="st">"Paraná"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">valor_equipe_titular_mandante</span>, <span class="va">idade_media_titular_mandante</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">dados_dispersao</span><span class="op">)</span></span>
<span><span class="co">#&gt;  ano_campeonato     data               rodada        estadio         </span></span>
<span><span class="co">#&gt;  Min.   :2011   Length:298         Min.   : 1.00   Length:298        </span></span>
<span><span class="co">#&gt;  1st Qu.:2015   Class :character   1st Qu.:10.00   Class :character  </span></span>
<span><span class="co">#&gt;  Median :2019   Mode  :character   Median :19.00   Mode  :character  </span></span>
<span><span class="co">#&gt;  Mean   :2018                      Mean   :19.33                     </span></span>
<span><span class="co">#&gt;  3rd Qu.:2022                      3rd Qu.:29.00                     </span></span>
<span><span class="co">#&gt;  Max.   :2024                      Max.   :38.00                     </span></span>
<span><span class="co">#&gt;                                                                      </span></span>
<span><span class="co">#&gt;     publico      time_mandante      time_visitante     tecnico_mandante  </span></span>
<span><span class="co">#&gt;  Min.   :    0   Length:298         Length:298         Length:298        </span></span>
<span><span class="co">#&gt;  1st Qu.: 7629   Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Median :13666   Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Mean   :13578                                                           </span></span>
<span><span class="co">#&gt;  3rd Qu.:19726                                                           </span></span>
<span><span class="co">#&gt;  Max.   :38059                                                           </span></span>
<span><span class="co">#&gt;                                                                          </span></span>
<span><span class="co">#&gt;  tecnico_visitante  colocacao_mandante colocacao_visitante</span></span>
<span><span class="co">#&gt;  Length:298         Min.   : 1.00      Min.   : 1.00      </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.: 8.00      1st Qu.: 5.00      </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :13.00      Median :10.00      </span></span>
<span><span class="co">#&gt;                     Mean   :12.57      Mean   :10.38      </span></span>
<span><span class="co">#&gt;                     3rd Qu.:18.00      3rd Qu.:16.00      </span></span>
<span><span class="co">#&gt;                     Max.   :20.00      Max.   :20.00      </span></span>
<span><span class="co">#&gt;                                                           </span></span>
<span><span class="co">#&gt;  valor_equipe_titular_mandante valor_equipe_titular_visitante</span></span>
<span><span class="co">#&gt;  Min.   :    1085              Min.   :     853              </span></span>
<span><span class="co">#&gt;  1st Qu.: 4850000              1st Qu.: 5920000              </span></span>
<span><span class="co">#&gt;  Median : 8125000              Median :12575000              </span></span>
<span><span class="co">#&gt;  Mean   :10204097              Mean   :17323914              </span></span>
<span><span class="co">#&gt;  3rd Qu.:13850000              3rd Qu.:25000000              </span></span>
<span><span class="co">#&gt;  Max.   :41400000              Max.   :84500000              </span></span>
<span><span class="co">#&gt;                                                              </span></span>
<span><span class="co">#&gt;  idade_media_titular_mandante idade_media_titular_visitante gols_mandante  </span></span>
<span><span class="co">#&gt;  Min.   :23.10                Min.   :20.50                 Min.   :0.000  </span></span>
<span><span class="co">#&gt;  1st Qu.:26.32                1st Qu.:26.40                 1st Qu.:1.000  </span></span>
<span><span class="co">#&gt;  Median :27.10                Median :27.40                 Median :1.000  </span></span>
<span><span class="co">#&gt;  Mean   :27.02                Mean   :27.37                 Mean   :1.303  </span></span>
<span><span class="co">#&gt;  3rd Qu.:27.77                3rd Qu.:28.50                 3rd Qu.:2.000  </span></span>
<span><span class="co">#&gt;  Max.   :30.60                Max.   :31.90                 Max.   :5.000  </span></span>
<span><span class="co">#&gt;                                                             NA's   :1      </span></span>
<span><span class="co">#&gt;  gols_visitante   gols_1_tempo_mandante gols_1_tempo_visitante</span></span>
<span><span class="co">#&gt;  Min.   :0.0000   Min.   :0.0000        Min.   :0.0000        </span></span>
<span><span class="co">#&gt;  1st Qu.:0.0000   1st Qu.:0.0000        1st Qu.:0.0000        </span></span>
<span><span class="co">#&gt;  Median :1.0000   Median :0.0000        Median :0.0000        </span></span>
<span><span class="co">#&gt;  Mean   :0.9428   Mean   :0.6342        Mean   :0.4228        </span></span>
<span><span class="co">#&gt;  3rd Qu.:1.0000   3rd Qu.:1.0000        3rd Qu.:1.0000        </span></span>
<span><span class="co">#&gt;  Max.   :4.0000   Max.   :4.0000        Max.   :3.0000        </span></span>
<span><span class="co">#&gt;  NA's   :1</span></span>
<span>  </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados_dispersao</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span>, color <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Quando os mapeamentos estéticos são definidos dentro de <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>, no nível global, eles são passados para todas as camadas geométricas subsequentes do gráfico. No entanto, cada função geométrica no <strong>ggplot2</strong> também pode aceitar um argumento <code>mapping</code>, o que permite mapeamentos estéticos locais que são adicionados aos mapeamentos herdados do nível global. Isso oferece uma flexibilidade adicional para controlar a aparência de diferentes partes do gráfico.</p>
<p>Por exemplo, se quisermos que os pontos sejam coloridos com base em uma variável categórica, mas não desejamos que a linha de tendência também seja separada por essa mesma variável, podemos especificar <code>color = species</code> apenas para <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>, mantendo o mapeamento da linha de tendência sem essa separação.</p>
<p>Isso permitirá que os pontos sejam coloridos de acordo com o time mandante, mas a linha de tendência será calculada com base nos dados completos, sem distinção de time.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados_dispersao</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Geralmente não é uma boa ideia representar informações usando apenas cores em um gráfico, pois as pessoas percebem as cores de maneira diferente devido ao daltonismo ou outras diferenças na visão das cores. Portanto, além da cor, também podemos mapear os <code>times</code> à estética da <code>forma</code>.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados_dispersao</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">time_mandante</span>, shape <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section><section id="melhorando-as-labels-e-cores" class="level4" data-number="2.8.3.4"><h4 data-number="2.8.3.4" class="anchored" data-anchor-id="melhorando-as-labels-e-cores">
<span class="header-section-number">2.8.3.4</span> Melhorando as labels e cores</h4>
<p>Podemos refinar o gráfico melhorando as labels e utilizando uma paleta de cores mais adequada. Isso pode ser feito com a função <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> para ajustar os rótulos dos eixos e o título, e usando uma paleta de cores compatível com daltonismo para tornar o gráfico acessível.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'scales'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:purrr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     discard</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:readr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     col_factor</span></span>
<span></span>
<span><span class="co"># Definindo as cores dos times</span></span>
<span><span class="va">cores_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Athletico-PR"</span> <span class="op">=</span> <span class="st">"#CC0000"</span>,  </span>
<span>                 <span class="st">"Coritiba FC"</span> <span class="op">=</span> <span class="st">"#006633"</span>,   </span>
<span>                 <span class="st">"Paraná"</span> <span class="op">=</span> <span class="st">"#0033A0"</span><span class="op">)</span>       </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">dados_dispersao</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">valor_equipe_titular_mandante</span>, y <span class="op">=</span> <span class="va">idade_media_titular_mandante</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">time_mandante</span>, shape <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Valor do time mandante vs. Idade Média Mandante"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Relação entre os times Athletico, Coritiba e Paraná"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Valor do time mandante"</span>, y <span class="op">=</span> <span class="st">"Idade Média"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Time Mandante"</span>, shape <span class="op">=</span> <span class="st">"Time Mandante"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">cores_times</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/label_number.html">label_number</a></span><span class="op">(</span>scale_cut <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/number.html">cut_short_scale</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Com isso, temos um gráfico completo que mostra a relação entre o <strong>valor do time mandante</strong> e a <strong>idade média time mandante</strong>, com uma linha de tendência, cores distintas para cada time, e rótulos claros para os eixos e a legenda.</p>
<hr>
<p>Esse exemplo mostra passo a passo como criar e refinar um gráfico de dispersão usando o <strong>ggplot2</strong>, aplicando ao seu caso específico de <strong>valor do time mandante</strong> e <strong>idade média time mandante</strong>.</p>
</section></section><section id="o-que-esse-gráfico-mostra" class="level3" data-number="2.8.4"><h3 data-number="2.8.4" class="anchored" data-anchor-id="o-que-esse-gráfico-mostra">
<span class="header-section-number">2.8.4</span> O que esse gráfico mostra:</h3>
<ul>
<li><p>Cada ponto no gráfico representa um jogo, com o <strong>valor do time mandante presente</strong> plotado no eixo X e a <strong>idade média time mandante</strong> no eixo Y.</p></li>
<li><p>Esse tipo de gráfico permite verificar se há alguma relação entre a posição do time na tabela e o valor do time mandante presente nos jogos.</p></li>
</ul>
<p>Aqui está um exemplo de como apresentar um <strong>gráfico de setores (pizza)</strong> seguindo o modelo que você utilizou para o gráfico de dispersão:</p>
<hr></section></section><section id="gráfico-de-setores-pizza" class="level2" data-number="2.9"><h2 data-number="2.9" class="anchored" data-anchor-id="gráfico-de-setores-pizza">
<span class="header-section-number">2.9</span> Gráfico de Setores (Pizza)</h2>
<p>O <strong>Gráfico de Setores</strong> é utilizado para representar a proporção ou percentual de diferentes categorias dentro de um conjunto de dados. Cada fatia do gráfico representa uma categoria, e o tamanho da fatia corresponde à proporção daquela categoria em relação ao total.</p>
<section id="utilidade-3" class="level3" data-number="2.9.1"><h3 data-number="2.9.1" class="anchored" data-anchor-id="utilidade-3">
<span class="header-section-number">2.9.1</span> Utilidade</h3>
<ul>
<li>
<strong>Comparação de proporções</strong>: O gráfico de setores é útil para visualizar como diferentes categorias contribuem para um todo, facilitando a identificação das maiores e menores categorias.</li>
<li>
<strong>Distribuição visual</strong>: Ele também permite ver rapidamente qual categoria tem maior ou menor participação relativa dentro de um conjunto de dados.</li>
</ul></section><section id="exemplo-de-aplicação-3" class="level3" data-number="2.9.2"><h3 data-number="2.9.2" class="anchored" data-anchor-id="exemplo-de-aplicação-3">
<span class="header-section-number">2.9.2</span> Exemplo de Aplicação</h3>
<p>Ao gerar um gráfico de setores para representar a participação de público entre diferentes times mandantes, você pode visualizar qual time atraiu o maior número de espectadores ao longo de uma temporada ou campeonato. Isso permite identificar times com grande apelo de público em comparação com outros.</p>
</section><section id="criando-o-gráfico-1" class="level3" data-number="2.9.3"><h3 data-number="2.9.3" class="anchored" data-anchor-id="criando-o-gráfico-1">
<span class="header-section-number">2.9.3</span> Criando o Gráfico</h3>
<p>O primeiro passo é carregar o conjunto de dados que vai ser utilizado no gráfico e calcular as proporções de cada categoria (neste caso, os times mandantes). Para isso, utilizamos funções que somam os valores do público por time mandante e calculam a proporção em relação ao total. A função <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> será utilizada para gerar o gráfico, e a visualização será baseada na função <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> com a transformação <code><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar()</a></code> para criar o gráfico de pizza.</p>
<p>Aqui está o código para criar o gráfico de setores:</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dados_setores</span> <span class="op">&lt;-</span> <span class="va">dados</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time_mandante</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>publico_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">publico</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>proporcao <span class="op">=</span> <span class="va">publico_total</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">publico_total</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Criando o gráfico de setores</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dados_setores</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="va">proporcao</span>, fill <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Distribuição do Público por Time Mandante"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Participação relativa dos públicos dos times ao longo da temporada"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Time Mandante"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>O gráfico de setores gerado acima exibe a participação de cada time mandante no total de público ao longo do campeonato. A área de cada fatia representa a proporção de público atraída por aquele time. Quanto maior a fatia, maior a participação daquele time no total de público.</p>
<section id="melhorando-a-visualização-com-labels" class="level4" data-number="2.9.3.1"><h4 data-number="2.9.3.1" class="anchored" data-anchor-id="melhorando-a-visualização-com-labels">
<span class="header-section-number">2.9.3.1</span> Melhorando a Visualização com Labels</h4>
<p>Para melhorar a legibilidade do gráfico, podemos adicionar labels (rótulos) que mostrem a proporção exata de cada time diretamente nas fatias do gráfico.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dados_setores</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="va">proporcao</span>, fill <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">proporcao</span><span class="op">)</span><span class="op">)</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Distribuição do Público por Time Mandante"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Participação relativa dos públicos dos times ao longo da temporada"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Time Mandante"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="redução-de-dados-para-melhoria-da-visualização-1" class="level3" data-number="2.9.4"><h3 data-number="2.9.4" class="anchored" data-anchor-id="redução-de-dados-para-melhoria-da-visualização-1">
<span class="header-section-number">2.9.4</span> Redução de Dados para Melhoria da Visualização</h3>
<p>Quando trabalhamos com muitos times ou categorias, um gráfico de setores pode se tornar confuso se houver muitas fatias pequenas. Para melhorar a legibilidade, é comum filtrar os dados para focar apenas nas principais categorias (como os 3 times com maior público) ou agrupar categorias menores em uma única fatia representando “Outros”.</p>
<div class="cell">
<details class="code-fold"><summary>R</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dados_setores_reduzidos</span> <span class="op">&lt;-</span> <span class="va">dados_setores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">proporcao</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>time_mandante <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">3</span>, <span class="st">"Outros"</span>, <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">time_mandante</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>publico_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">publico_total</span><span class="op">)</span>, proporcao <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">proporcao</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Criando o gráfico de setores reduzido</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dados_setores_reduzidos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="va">proporcao</span>, fill <span class="op">=</span> <span class="va">time_mandante</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">proporcao</span>, accuracy <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Distribuição do Público por Time Mandante"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Os 3 principais times em termos de público"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Time Mandante"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Dark2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02_graphics_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>O gráfico de setores é uma excelente ferramenta para visualizar a proporção de categorias dentro de um total. No contexto de público por time mandante, ele nos ajuda a identificar quais times atraíram a maior quantidade de público e qual é a participação relativa de cada um no total. Ao reduzir os dados e focar nas principais categorias, garantimos uma visualização mais limpa e eficiente.</p>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./01_intro-ggplot.html" class="pagination-link  aria-label=" pacote="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">O pacote <code>ggplot2</code></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03_exercises.html" class="pagination-link" aria-label="<span class='chapter-number'>3</span>&nbsp; <span class='chapter-title'>Exercícios</span>">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exercícios</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Estatística UFPR 2024</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>